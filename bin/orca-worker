#!/usr/bin/env coffee
[_, _, name] = process.argv

{read, log, abort} = require "fairmont"
CSON = require "cson"
parse = CSON.parseSync

optimist = require("optimist")
  .demand("configuration")
  .alias("configuration", "c")
  .describe("configuration", "Path to CSON configuration file")

argv = optimist.argv

Environment = require "../src/environment"

try
  configuration = parse read argv.configuration
  environment = new Environment(configuration)
catch error
  abort error


TestsWorker = require "../src/tests_worker"
worker = new TestsWorker(environment)
worker.run()

